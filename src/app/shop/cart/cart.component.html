<!-- <app-breadcrumb [title]="'Cart'" [breadcrumb]="'Cart'"></app-breadcrumb> -->
<!-- section start -->
<section class="cart-section">
    <div class="container">
        <div class="col-sm-12 empty-cart-cls text-center" *ngIf="products.length < 1">
            <img src="assets/images/icon-empty-cart.png" class="img-fluid mb-4">
            <h3><strong>Your Cart is Empty</strong></h3>
            <h4>Add something to make me happy :)</h4>
        </div>

        <div class="row cart_section" *ngIf="products.length > 0">
            <div class="col-sm-12">
                <div class="title1 section-b-space">
                    <h2>Your shopping bag</h2>
                </div>
            </div>
            <div class="col-sm-12 col-lg-8 col-12">
                <div class="row justify-content-center align-items-center mb-3 cart-products-list"
                    *ngFor="let product of products">
                    <div class="col-sm-2 col-md-2 col-6 mb-3 mb-sm-0">
                        <div class="cart_product_img">
                            <a *ngIf="(product.left_eye_qty === undefined || product.left_eye_qty === 0) && (product.right_eye_qty === undefined || product.right_eye_qty === 0)"
                                [routerLink]="['/product/', product.product_slug]" routerLinkActive="active">
                                <img [defaultImage]="product?.product_image?.[0]?.pro_image ? product?.product_image?.[0]?.pro_image : 'assets/images/product/placeholder.jpg'"
                                    [lazyLoad]="product?.product_image?.[0]?.pro_image ? product?.product_image?.[0]?.pro_image : (product?.product_image?.[0]?.pro_image || 'assets/images/product/placeholder.jpg')"
                                    [src]="product?.product_image?.[0]?.pro_image ? product?.product_image?.[0]?.pro_image : (product?.product_image?.[0]?.pro_image || 'assets/images/product/placeholder.jpg')"
                                    class="img-fluid lazy-loading" alt="{{ product.product_name }}" />
                            </a>
                            <a *ngIf="product.left_eye_qty >= 1 || product.right_eye_qty >= 1"
                                [routerLink]="['/contact-product/', product.product_slug]" routerLinkActive="active">
                                <img [defaultImage]="product?.product_image?.[0]?.pro_image ? product?.product_image?.[0]?.pro_image : 'assets/images/product/placeholder.jpg'"
                                    [lazyLoad]="product?.product_image?.[0]?.pro_image ? product?.product_image?.[0]?.pro_image : (product?.product_image?.[0]?.pro_image || 'assets/images/product/placeholder.jpg')"
                                    [src]="product?.product_image?.[0]?.pro_image ? product?.product_image?.[0]?.pro_image : (product?.product_image?.[0]?.pro_image || 'assets/images/product/placeholder.jpg')"
                                    class="img-fluid lazy-loading" alt="{{ product.product_name }}" />
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-5 col-md-5 col-12 mb-3 mb-sm-0">
                        
                        <div class="cart_product_info">
                            <a *ngIf="(product.left_eye_qty === undefined || product.left_eye_qty === 0) && (product.right_eye_qty === undefined || product.right_eye_qty === 0)"
                                [routerLink]="['/product/', product.product_slug]" routerLinkActive="active">
                                <p class="mb-2 product_title">
                                    {{ product.product_name | titlecase }}
                                </p>
                            </a>
                            <a *ngIf="product.left_eye_qty >= 1 || product.right_eye_qty >= 1"
                                [routerLink]="['/contact-product/', product.product_slug]" routerLinkActive="active">
                                <p class="mb-2 product_title">
                                    {{ product.product_name | titlecase }}
                                </p>
                            </a>
                            <p class="mb-2" *ngIf="product.left_eye_qty >= 1 || product.right_eye_qty >= 1">
                                {{product.pack}}</p>
                            <p class="mb-2">Price : {{ ((product.product_sale_price)? product.product_sale_price:
                                product.product_retail_price) | currency: product_service.Currency?.currency:'symbol'}}
                            </p>
                            <span *ngIf="product.addons && product.addons.length > 0">
                                <p class="mt-3 mb-2">Addons</p>
                                <table class="w-100">
                                    <tr *ngFor="let addon of product.addons; let i = index">
                                        <td>
                                            <span class="me-2" *ngIf="addon.input_type">{{(addon.input_type == 'range' ||
                                                addon.input_type == 'range-input' ||
                                                addon.input_type == 'input')? addon.key+':'+addon.value : addon.value }} -
                                                {{
                                                addon.price | currency: product_service.Currency?.currency:'symbol'
                                                }}</span>
                                                <span *ngIf="addon.extra_document">
                                                    <span *ngFor="let doc of addon.extra_document; let i = index">
                                                        <span>{{doc.key}} -  {{
                                                            doc.price | currency: product_service.Currency?.currency:'symbol'
                                                            }}</span>
                                                    </span>
                                                </span>
                                        </td>
                                        <td>
                                            <a (click)="removeAddon(product, i)"><i class="fa fa-times"
                                                aria-hidden="true"></i></a>
                                        </td>
                                    </tr>
                                </table>
                                <!-- <ul class="addon_cart">
                                    <li *ngFor="let addon of product.addons; let i = index">
                                        <span class="me-2" *ngIf="addon.input_type">{{(addon.input_type == 'range' ||
                                            addon.input_type == 'range-input' ||
                                            addon.input_type == 'input')? addon.key+':'+addon.value : addon.value }} -
                                            {{
                                            addon.price | currency: product_service.Currency?.currency:'symbol'
                                            }}</span>
                                        <span *ngIf="addon.extra_document">
                                            <span *ngFor="let doc of addon.extra_document; let i = index">
                                                <span>{{doc.key}} -  {{
                                                    doc.price | currency: product_service.Currency?.currency:'symbol'
                                                    }}</span>
                                            </span>
                                        </span>
                                        <a (click)="removeAddon(product, i)"><i class="fa fa-times"
                                                aria-hidden="true"></i></a>
                                    </li>
                                </ul> -->
                                <p class="mt-2 mb-2 fw-bold">Total addons : {{ ((product.addonsprice)?
                                    product.addonsprice: 0) | currency: product_service.Currency?.currency:'symbol'}}
                                </p>
                            </span>
                            
                            
                        </div>
                    </div>
                    <div class="col-sm-5 col-md-5 col-12 text-center">
                        <div
                            *ngIf="(product.left_eye_qty === undefined || product.left_eye_qty === 0) && (product.right_eye_qty === undefined || product.right_eye_qty === 0)">
                            <div class="qty-box">
                                <div class="input-group">
                                    <span class="input-group-prepend">
                                        <button type="button" class="btn quantity-left-minus"
                                            [disabled]="desabledecrement" data-type="minus"
                                            (click)="decrement(product)">
                                            <i class="ti-minus"></i>
                                        </button>
                                    </span>
                                    <input type="text" name="quantity" class="form-control input-number" disabled
                                        [(ngModel)]="product.quantity">
                                    <span class="input-group-prepend">
                                        <button type="button" class="btn quantity-right-plus"
                                            [disabled]="desableincrement || product.stock <= 0" data-type="plus"
                                            (click)="increment(product)">
                                            <i class="ti-plus"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex" *ngIf="product.left_eye_qty >= 1 || product.right_eye_qty >= 1">
                            <div class="left-eye">
                                <h6 class="product-title text-center">Left Eye</h6>
                                <div class="qty-box">
                                    <div class="input-group">
                                        <span class="input-group-prepend">
                                            <button type="button" class="btn quantity-left-minus" data-type="minus"
                                                (click)="decrement1(product)">
                                                <i class="ti-minus"></i>
                                            </button>
                                        </span>
                                        <input type="text" name="quantity" class="form-control input-number"
                                            [(ngModel)]="product.left_eye_qty" disabled />
                                        <span class="input-group-prepend">
                                            <button [disabled]="product.stock <= 0" type="button"
                                                class="btn quantity-right-plus" data-type="plus"
                                                (click)="increment1(product)">
                                                <i class="ti-plus"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="right-eye">
                                <h6 class="product-title text-center">Right Eye</h6>
                                <div class="qty-box">
                                    <div class="input-group">
                                        <span class="input-group-prepend">
                                            <button type="button" class="btn quantity-left-minus" data-type="minus"
                                                (click)="decrement2(product)">
                                                <i class="ti-minus"></i>
                                            </button>
                                        </span>
                                        <input type="text" name="quantity" class="form-control input-number"
                                            [(ngModel)]="product.right_eye_qty" disabled />
                                        <span class="input-group-prepend">
                                            <button [disabled]="product.stock <= 0" type="button"
                                                class="btn quantity-right-plus" data-type="plus"
                                                (click)="increment2(product)">
                                                <i class="ti-plus"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="mt-3">
                            <a *ngIf="(product.left_eye_qty === undefined || product.left_eye_qty === 0) && (product.right_eye_qty === undefined || product.right_eye_qty === 0)"
                            [routerLink]="['/product/', product.product_slug]"
                            class="loginBtn">View Details</a>
                            <a *ngIf="product.left_eye_qty >= 1 || product.right_eye_qty >= 1"
                            [routerLink]="['/contact-product/', product.product_slug]"
                            class="loginBtn">View Details</a>
                        </p>
                        <ul class="cart_item_action mt-2">
                            <!-- <li><i class="ti-pencil"></i>Edit Item</li> -->
                            <li><a (click)="removeItem(product)"><i class="ti-trash"></i>Remove</a></li>
                            <li><a (click)="addwishlist(product)"> <i
                                        [ngClass]="checkwishlist(product)? 'fa fa-heart' : 'fa fa-heart-o'"
                                        class=""></i>Wishlist</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-2 col-12">
                        
                    </div>
                </div>
            </div>

            <!-- Product price box -->
            <div class="col-lg-4 col-sm-12 col-xs-12">
                <div class="checkout-details">
                    <div class="order-box">
                        <div class="title-box">
                            <div>Product <span> Total</span></div>
                        </div>
                        <ul class="qty" *ngFor="let product of products">
                            <li>{{ product.product_name | titlecase }} Ã— {{product.quantity}} <span>{{
                                    ((product.product_sale_price)? product.product_sale_price:
                                    product.product_retail_price) | currency:
                                    product_service.Currency?.currency:'symbol'}} + {{ ((product.addonsprice)?
                                    product.addonsprice: 0) | currency:
                                    product_service.Currency?.currency:'symbol'}}</span></li>
                        </ul>
                        <ul class="sub-total">
                            <li>Subtotal <span class="count">{{ getTotal | async |
                                    currency:product_service?.Currency.currency:'symbol' }}</span></li>
                            <!-- <li>Coupon <span class="count">-$77.60</span></li>
                      <li>Gift Card <span class="count">-$100.00</span></li>-->
                            <li>Estimated Tax <span class="count">{{tax_percentage_value ? ((getTotal | async) *
                                    (tax_percentage_value / 100) | number:'1.2-2' |
                                    currency:product_service?.Currency.currency:'symbol'): 0}}</span></li>
                            <li>Estimated Shipping <span class="count">{{shipping_charge_value ? (shipping_charge_value
                                    |
                                    currency:product_service?.Currency.currency:'symbol') : 'Free'}}</span></li>
                        </ul>

                        <ul class="total">
                            <li>Estimated Total <span class="count"> {{ (getTotal | async) + ((getTotal | async) *
                                    (tax_percentage_value / 100)) + shipping_charge_value |
                                    currency:product_service?.Currency.currency:'symbol' }}</span></li>
                        </ul>
                    </div>
                    <div class="text-center">
                        <a [routerLink]="['/checkout']" class="createBtn w-100"><i
                                class="ti-lock me-2"></i>Checkout</a>
                        <!-- <button class="btn btn-solid rounded-lg w-100"></button> -->
                    </div>
                    <!-- <div class="text-center mt-3">
                      <a href="javascript:void(0)" class="btn rounded-lg paypal_btn w-100"><i class="fa fa-paypal mr-1"></i>Paypal</a>
                  </div> -->
                </div>
            </div>
            <!-- Product price box end -->
        </div>
    </div>
</section>
<!--section end-->