<!-- <app-breadcrumb [title]="'Dashboard'" [breadcrumb]="'Dashboard'"></app-breadcrumb> -->

<section class="section-b-space">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="account-sidebar" (click)="ToggleDashboard()">
          <a href="javascript:void(0)" class="popup-btn">
            My Account
          </a>
        </div>
        <div class="dashboard-left" [class.open]="openDashboard">
          <div class="collection-mobile-back" (click)="ToggleDashboard()">
            <span class="filter-back">
              <i class="fa fa-angle-left" aria-hidden="true"></i> back
            </span>
          </div>
          <div class="block-content">
            <ul>
              <li><a [routerLink]="['/dashboard']">My Account</a></li>
              <li><a [routerLink]="['/address']">Address Book</a></li>
              <li class="active"><a [routerLink]="['/order-list']">Order List</a></li>
              <li><a [routerLink]="['/change-password']">Change Password</a></li>
              <li class="last"><a (click)="logout()">Log Out</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="dashboard-right">
          <div class="dashboard">
            <!--<div class="page-title">
                            <h2>My Dashboard</h2>
                        </div>
                        <div class="welcome-msg">
                            <p>Hello, MARK JECNO !</p>
                            <p>From your My Account Dashboard you have the ability to view a snapshot of your recent account activity and update your account information. Select a link below to view or edit information.</p>
                        </div>-->
            <div class="box-account box-info">
              <div class="box-head pb-3" *ngIf="orderliststatus">
                <h2>Order List</h2>
              </div>
              <div class="box-head pb-3" *ngIf="!orderliststatus">
                <h3 class="text-center ">You have no order </h3>
              </div>
              <div *ngIf="orderliststatus" class="row">
                <mat-accordion>
                  <!-- Ongoing Orders -->
                  <mat-expansion-panel [expanded]="true">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        <h5 class="m-0">Ongoing Orders</h5>
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                      <div class="col-sm-6" *ngFor="let order of filterongoingOrders">
                        <div class="card">
                          <div class="card-body">
                            <address class="mb-1" (click)="viewOrder(order._id)">
                              <div *ngIf="order.payment_status !== 'APPROVED' && order.payment_status !== 'COMPLETED'"
                                class="bg-warning bg-gradient text-white pending">Order Pending</div>
                              <div *ngIf="order.payment_status === 'APPROVED' || order.payment_status === 'COMPLETED'"
                                class="bg-primary text-white ongoing">Order Ongoing</div>
                                <div class="row align-items-center">
                                  <div class="col-12 col-sm-3">
                                    <div class="order-list">
                                      <img src="{{order.order_details[0].product_image}}"
                                        alt="{{order.order_details[0].product_name}}" class="img-fluid">
                                    </div>
                                  </div>
                                  <div class="col-12 col-sm-9">
                                      <h4 class="fs-6">{{order.order_details[0].product_name}} <span
                                        *ngIf="order.order_details.length > 1">... +{{(order.order_details.length - 1)}}
                                        Items</span></h4>
                                      <p>Item Qty : {{order.order_details[0].qty}}</p>
                                      <p>Product Price : {{order.order_details[0].price |
                                        currency:productService?.Currency.currency:'symbol'}}</p>
                                      <p>Addons Price : {{order.order_details[0].addonsprice |
                                        currency:productService?.Currency.currency:'symbol'}}</p>
                                      <p>Total Amount : {{(order.order_details[0].price + order.order_details[0].addonsprice)
                                        * (order.order_details[0].qty) | currency:productService?.Currency.currency:'symbol'
                                        }}</p>
                                      <p class="pb-3 weight-600">Ph: {{order.billing_phone}}</p>
                                      <a class="loginBtn" (click)="viewOrder(order._id)">View Order</a>
                                  </div>
                                </div>
                              
                              
                            </address>
                          </div>
                        </div>
                      </div>
                    </div>
                  </mat-expansion-panel>
                </mat-accordion>

                <mat-accordion>
                  <!-- Delivered Orders -->
                  <mat-expansion-panel [expanded]="true">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        <h5 class="m-0">Delivered Orders</h5>
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="row">
                      <div class="col-sm-6" *ngFor="let order of deliveredOrders">
                        <div class="card">
                          <div class="card-body delivery-card">
                            <address class="mb-1" (click)="viewOrder(order._id)">
                              <div class="bg-success p-2 text-white devivery">delivered</div>
                              <div class="order-list">
                                <img src="{{order.order_details[0].product_image}}"
                                  alt="{{order.order_details[0].product_name}}" class="img-fluid">
                              </div>
                              <div>
                                <h4>{{order.order_details[0].product_name}} <span
                                    *ngIf="order.order_details.length > 1">+ {{(order.order_details.length - 1)}}
                                    Items</span></h4>
                                <p>Item Qty : {{order.order_details[0].qty}}</p>
                                <p>Product Price : {{order.order_details[0].price |
                                  currency:productService?.Currency.currency:'symbol'}}</p>
                                <p>Addons Price : {{order.order_details[0].addonsprice |
                                  currency:productService?.Currency.currency:'symbol'}}</p>
                                <p>Total Amount : {{(order.order_details[0].price + order.order_details[0].addonsprice)
                                  * (order.order_details[0].qty) | currency:productService?.Currency.currency:'symbol'
                                  }}</p>
                                <p class="pb-3 weight-600">Ph: {{order.billing_phone}}</p>
                                <a class="btn btn-xs btn-solid rounded-lg" (click)="viewOrder(order._id)">View Order</a>
                              </div>
                            </address>
                          </div>
                        </div>
                      </div>
                    </div>
                  </mat-expansion-panel>
                </mat-accordion>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>